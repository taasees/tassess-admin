{"version":3,"file":"logs.js","names":["reducer","state","activities","status","action","type","Actions","SetStatus","payload","StartActivity","id","UpdateActivity","PendingActivity","rest","activity","ActivityErrored","errored","EndActivity","CancelActivity","duration","SetLogs"],"sources":["../../../../src/reporter/redux/reducers/logs.ts"],"sourcesContent":["import { ActionsUnion, IGatsbyCLIState, ISetLogs } from \"../types\"\nimport { Actions } from \"../../constants\"\n\nexport const reducer = (\n  state: IGatsbyCLIState = {\n    activities: {},\n    status: ``,\n  },\n  action: ActionsUnion | ISetLogs\n): IGatsbyCLIState => {\n  switch (action.type) {\n    case Actions.SetStatus: {\n      return {\n        ...state,\n        status: action.payload,\n      }\n    }\n\n    case Actions.StartActivity: {\n      const { id } = action.payload\n      return {\n        ...state,\n        activities: {\n          ...state.activities,\n          [id]: action.payload,\n        },\n      }\n    }\n\n    case Actions.UpdateActivity:\n    case Actions.PendingActivity: {\n      const { id, ...rest } = action.payload\n      const activity = state.activities[id]\n\n      return {\n        ...state,\n        activities: {\n          ...state.activities,\n          [id]: {\n            ...activity,\n            id,\n            ...rest,\n          },\n        },\n      }\n    }\n    case Actions.ActivityErrored: {\n      const { id } = action.payload\n      const activity = state.activities[id]\n\n      return {\n        ...state,\n        activities: {\n          ...state.activities,\n          [id]: {\n            ...activity,\n            errored: true,\n          },\n        },\n      }\n    }\n\n    case Actions.EndActivity:\n    case Actions.CancelActivity: {\n      const { id, status, duration } = action.payload\n      const activity = state.activities[id]\n      if (!activity) {\n        return state\n      }\n\n      const activities = { ...state.activities }\n      activities[id] = {\n        ...activity,\n        status,\n        duration,\n      }\n\n      return {\n        ...state,\n        activities,\n      }\n    }\n\n    case Actions.SetLogs: {\n      return action.payload\n    }\n  }\n\n  return state\n}\n"],"mappings":";;;;AACA;AAEO,MAAMA,OAAO,GAAG,CACrBC,KAAsB,GAAG;EACvBC,UAAU,EAAE,CAAC,CAAC;EACdC,MAAM,EAAG;AACX,CAAC,EACDC,MAA+B,KACX;EACpB,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKC,kBAAO,CAACC,SAAS;MAAE;QACtB,OAAO;UACL,GAAGN,KAAK;UACRE,MAAM,EAAEC,MAAM,CAACI;QACjB,CAAC;MACH;IAEA,KAAKF,kBAAO,CAACG,aAAa;MAAE;QAC1B,MAAM;UAAEC;QAAG,CAAC,GAAGN,MAAM,CAACI,OAAO;QAC7B,OAAO;UACL,GAAGP,KAAK;UACRC,UAAU,EAAE;YACV,GAAGD,KAAK,CAACC,UAAU;YACnB,CAACQ,EAAE,GAAGN,MAAM,CAACI;UACf;QACF,CAAC;MACH;IAEA,KAAKF,kBAAO,CAACK,cAAc;IAC3B,KAAKL,kBAAO,CAACM,eAAe;MAAE;QAC5B,MAAM;UAAEF,EAAE;UAAE,GAAGG;QAAK,CAAC,GAAGT,MAAM,CAACI,OAAO;QACtC,MAAMM,QAAQ,GAAGb,KAAK,CAACC,UAAU,CAACQ,EAAE,CAAC;QAErC,OAAO;UACL,GAAGT,KAAK;UACRC,UAAU,EAAE;YACV,GAAGD,KAAK,CAACC,UAAU;YACnB,CAACQ,EAAE,GAAG;cACJ,GAAGI,QAAQ;cACXJ,EAAE;cACF,GAAGG;YACL;UACF;QACF,CAAC;MACH;IACA,KAAKP,kBAAO,CAACS,eAAe;MAAE;QAC5B,MAAM;UAAEL;QAAG,CAAC,GAAGN,MAAM,CAACI,OAAO;QAC7B,MAAMM,QAAQ,GAAGb,KAAK,CAACC,UAAU,CAACQ,EAAE,CAAC;QAErC,OAAO;UACL,GAAGT,KAAK;UACRC,UAAU,EAAE;YACV,GAAGD,KAAK,CAACC,UAAU;YACnB,CAACQ,EAAE,GAAG;cACJ,GAAGI,QAAQ;cACXE,OAAO,EAAE;YACX;UACF;QACF,CAAC;MACH;IAEA,KAAKV,kBAAO,CAACW,WAAW;IACxB,KAAKX,kBAAO,CAACY,cAAc;MAAE;QAC3B,MAAM;UAAER,EAAE;UAAEP,MAAM;UAAEgB;QAAS,CAAC,GAAGf,MAAM,CAACI,OAAO;QAC/C,MAAMM,QAAQ,GAAGb,KAAK,CAACC,UAAU,CAACQ,EAAE,CAAC;QACrC,IAAI,CAACI,QAAQ,EAAE;UACb,OAAOb,KAAK;QACd;QAEA,MAAMC,UAAU,GAAG;UAAE,GAAGD,KAAK,CAACC;QAAW,CAAC;QAC1CA,UAAU,CAACQ,EAAE,CAAC,GAAG;UACf,GAAGI,QAAQ;UACXX,MAAM;UACNgB;QACF,CAAC;QAED,OAAO;UACL,GAAGlB,KAAK;UACRC;QACF,CAAC;MACH;IAEA,KAAKI,kBAAO,CAACc,OAAO;MAAE;QACpB,OAAOhB,MAAM,CAACI,OAAO;MACvB;EAAC;EAGH,OAAOP,KAAK;AACd,CAAC;AAAA"}