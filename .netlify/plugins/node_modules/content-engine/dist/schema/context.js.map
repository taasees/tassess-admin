{"version":3,"file":"context.js","names":["withResolverContext","schema","schemaComposer","context","customContext","nodeModel","stats","tracer","telemetryResolverTimings","LocalNodeModel","createPageDependency","defaultFieldResolver","withContext","path","undefined"],"sources":["../../src/schema/context.ts"],"sourcesContent":["import { GraphQLSchema } from \"graphql\"\nimport { SchemaComposer } from \"graphql-compose\"\n\nimport { LocalNodeModel } from \"./node-model\"\nimport { defaultFieldResolver } from \"./resolvers\"\nimport { IGraphQLRunnerStats } from \"../query/types\"\nimport {\n  IGatsbyResolverContext,\n  IGraphQLSpanTracer,\n  IGraphQLTelemetryRecord,\n} from \"./type-definitions\"\n\nexport default function withResolverContext<TSource, TArgs>({\n  schema,\n  schemaComposer,\n  context,\n  customContext,\n  nodeModel,\n  stats,\n  tracer,\n  telemetryResolverTimings,\n}: {\n  schema: GraphQLSchema\n  schemaComposer: SchemaComposer<IGatsbyResolverContext<TSource, TArgs>> | null\n  context?: Record<string, any>\n  customContext?: Record<string, any>\n  nodeModel?: any\n  stats?: IGraphQLRunnerStats | null\n  tracer?: IGraphQLSpanTracer\n  telemetryResolverTimings?: Array<IGraphQLTelemetryRecord>\n}): IGatsbyResolverContext<TSource, TArgs> {\n  if (!nodeModel) {\n    // @ts-ignore\n    nodeModel = new LocalNodeModel({\n      schema,\n      schemaComposer,\n      createPageDependency: () => {},\n    })\n  }\n\n  return {\n    ...(context || {}),\n    ...(customContext || {}),\n    defaultFieldResolver,\n    nodeModel: nodeModel.withContext({\n      path: context ? context.path : undefined,\n    }),\n    stats: stats || null,\n    tracer: tracer || null,\n    telemetryResolverTimings,\n  }\n}\n"],"mappings":";;;;AAGA;AACA;AAQe,SAASA,mBAAmB,CAAiB;EAC1DC,MAAM;EACNC,cAAc;EACdC,OAAO;EACPC,aAAa;EACbC,SAAS;EACTC,KAAK;EACLC,MAAM;EACNC;AAUF,CAAC,EAA0C;EACzC,IAAI,CAACH,SAAS,EAAE;IACd;IACAA,SAAS,GAAG,IAAII,yBAAc,CAAC;MAC7BR,MAAM;MACNC,cAAc;MACdQ,oBAAoB,EAAE,MAAM,CAAC;IAC/B,CAAC,CAAC;EACJ;EAEA,OAAO;IACL,IAAIP,OAAO,IAAI,CAAC,CAAC,CAAC;IAClB,IAAIC,aAAa,IAAI,CAAC,CAAC,CAAC;IACxBO,oBAAoB,EAApBA,+BAAoB;IACpBN,SAAS,EAAEA,SAAS,CAACO,WAAW,CAAC;MAC/BC,IAAI,EAAEV,OAAO,GAAGA,OAAO,CAACU,IAAI,GAAGC;IACjC,CAAC,CAAC;IACFR,KAAK,EAAEA,KAAK,IAAI,IAAI;IACpBC,MAAM,EAAEA,MAAM,IAAI,IAAI;IACtBC;EACF,CAAC;AACH"}