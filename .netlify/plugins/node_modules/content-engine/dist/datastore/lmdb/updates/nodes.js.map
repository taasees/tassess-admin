{"version":3,"file":"nodes.js","names":["updateNodes","nodesDb","action","type","put","payload","id","remove"],"sources":["../../../../src/datastore/lmdb/updates/nodes.ts"],"sourcesContent":["import { ActionsUnion, IGatsbyNode } from \"../../../redux/types\"\nimport type { Database } from \"lmdb\"\n\ntype NodeId = string\n\nexport function updateNodes(\n  nodesDb: Database<IGatsbyNode, NodeId>,\n  action: ActionsUnion\n): Promise<boolean> | boolean {\n  switch (action.type) {\n    case `CREATE_NODE`:\n    case `ADD_FIELD_TO_NODE`:\n    case `ADD_CHILD_NODE_TO_PARENT_NODE`: {\n      return nodesDb.put(action.payload.id, action.payload)\n    }\n    case `DELETE_NODE`: {\n      if (action.payload) {\n        return nodesDb.remove(action.payload.id)\n      }\n\n      return false\n    }\n  }\n  return false\n}\n"],"mappings":";;;;AAKO,SAASA,WAAW,CACzBC,OAAsC,EACtCC,MAAoB,EACQ;EAC5B,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAM,aAAY;IAClB,KAAM,mBAAkB;IACxB,KAAM,+BAA8B;MAAE;QACpC,OAAOF,OAAO,CAACG,GAAG,CAACF,MAAM,CAACG,OAAO,CAACC,EAAE,EAAEJ,MAAM,CAACG,OAAO,CAAC;MACvD;IACA,KAAM,aAAY;MAAE;QAClB,IAAIH,MAAM,CAACG,OAAO,EAAE;UAClB,OAAOJ,OAAO,CAACM,MAAM,CAACL,MAAM,CAACG,OAAO,CAACC,EAAE,CAAC;QAC1C;QAEA,OAAO,KAAK;MACd;EAAC;EAEH,OAAO,KAAK;AACd"}