{"version":3,"file":"joi.js","names":["stripTrailingSlash","chain","replace","gatsbyConfigSchema","Joi","object","keys","flags","polyfill","boolean","default","siteMetadata","siteUrl","string","uri","unknown","mapping","plugins","array","proxy","items","prefix","required","url","single","developMiddleware","func","when","assetPrefix","allowRelative","relativeOnly","pathPrefix","then","error","Error","nodeSchema","id","children","forbidden","parent","allow","fields","internal","contentDigest","mediaType","type","owner","fieldOwners","content","description","ignoreType","counter","number","contentFilePath"],"sources":["../../src/joi-schemas/joi.ts"],"sourcesContent":["import Joi from \"joi\"\nimport { IGatsbyConfig, IGatsbyNode } from \"../redux/types\"\n\nconst stripTrailingSlash = (chain: Joi.StringSchema): Joi.StringSchema =>\n  chain.replace(/(\\w)\\/+$/, `$1`)\n\nexport const gatsbyConfigSchema: Joi.ObjectSchema<IGatsbyConfig> = Joi.object()\n  .keys({\n    flags: Joi.object(),\n    polyfill: Joi.boolean().default(true),\n    siteMetadata: Joi.object({\n      siteUrl: stripTrailingSlash(Joi.string()).uri(),\n    }).unknown(),\n    mapping: Joi.object(),\n    plugins: Joi.array(),\n    proxy: Joi.array()\n      .items(\n        Joi.object().keys({\n          prefix: Joi.string().required(),\n          url: Joi.string().required(),\n        })\n      )\n      .single(),\n    developMiddleware: Joi.func(),\n  })\n  // throws when both assetPrefix and pathPrefix are defined\n  .when(\n    Joi.object({\n      assetPrefix: Joi.string().uri({\n        allowRelative: true,\n        relativeOnly: true,\n      }),\n      pathPrefix: Joi.string()\n        .uri({\n          allowRelative: true,\n          relativeOnly: true,\n        })\n        .default(``),\n    }),\n    {\n      then: Joi.object({\n        assetPrefix: Joi.string()\n          .uri({\n            allowRelative: false,\n          })\n          .error(\n            new Error(\n              `assetPrefix must be an absolute URI when used with pathPrefix`\n            )\n          ),\n      }),\n    }\n  )\n\nexport const nodeSchema: Joi.ObjectSchema<IGatsbyNode> = Joi.object()\n  .keys({\n    id: Joi.string().required(),\n    children: Joi.array().items(Joi.string(), Joi.object().forbidden()),\n    parent: Joi.string().allow(null),\n    fields: Joi.object(),\n    internal: Joi.object()\n      .keys({\n        contentDigest: Joi.string().required(),\n        mediaType: Joi.string(),\n        type: Joi.string().required(),\n        owner: Joi.string().required(),\n        fieldOwners: Joi.object(),\n        content: Joi.string().allow(``),\n        description: Joi.string(),\n        ignoreType: Joi.boolean(),\n        counter: Joi.number(),\n        contentFilePath: Joi.string(),\n      })\n      .unknown(false), // Don't allow non-standard fields\n  })\n  .unknown()\n"],"mappings":"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"}