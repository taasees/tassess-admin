{"version":3,"file":"public-url-resolver.js","names":["publicUrlResolver","source","actions","store","shouldDispatch","dispatchLocalFileServiceJob","url","filename","contentDigest","internal","generateFileUrl","generatePublicUrlFieldConfig","type","resolve"],"sources":["../../../../src/plugin-utils/polyfill-remote-file/graphql/public-url-resolver.ts"],"sourcesContent":["import { generateFileUrl } from \"../utils/url-generator\"\nimport {\n  dispatchLocalFileServiceJob,\n  shouldDispatch,\n} from \"../jobs/dispatchers\"\nimport type { Actions, Store } from \"../../../types\"\nimport type { IRemoteFileNode, IGraphQLFieldConfigDefinition } from \"../types\"\n\nexport function publicUrlResolver(\n  source: IRemoteFileNode,\n  actions: Actions,\n  store?: Store\n): string {\n  if (shouldDispatch()) {\n    dispatchLocalFileServiceJob(\n      {\n        url: source.url,\n        filename: source.filename,\n        contentDigest: source.internal.contentDigest,\n      },\n      actions,\n      store\n    )\n  }\n\n  return generateFileUrl({ url: source.url, filename: source.filename }, store)\n}\n\nexport function generatePublicUrlFieldConfig(\n  actions: Actions,\n  store?: Store\n): IGraphQLFieldConfigDefinition<IRemoteFileNode, string> {\n  return {\n    type: `String!`,\n    resolve(source): string {\n      return publicUrlResolver(source, actions, store)\n    },\n  }\n}\n"],"mappings":";;;;;AAAA;AACA;AAOO,SAASA,iBAAiB,CAC/BC,MAAuB,EACvBC,OAAgB,EAChBC,KAAa,EACL;EACR,IAAI,IAAAC,2BAAc,GAAE,EAAE;IACpB,IAAAC,wCAA2B,EACzB;MACEC,GAAG,EAAEL,MAAM,CAACK,GAAG;MACfC,QAAQ,EAAEN,MAAM,CAACM,QAAQ;MACzBC,aAAa,EAAEP,MAAM,CAACQ,QAAQ,CAACD;IACjC,CAAC,EACDN,OAAO,EACPC,KAAK,CACN;EACH;EAEA,OAAO,IAAAO,6BAAe,EAAC;IAAEJ,GAAG,EAAEL,MAAM,CAACK,GAAG;IAAEC,QAAQ,EAAEN,MAAM,CAACM;EAAS,CAAC,EAAEJ,KAAK,CAAC;AAC/E;AAEO,SAASQ,4BAA4B,CAC1CT,OAAgB,EAChBC,KAAa,EAC2C;EACxD,OAAO;IACLS,IAAI,EAAG,SAAQ;IACfC,OAAO,CAACZ,MAAM,EAAU;MACtB,OAAOD,iBAAiB,CAACC,MAAM,EAAEC,OAAO,EAAEC,KAAK,CAAC;IAClD;EACF,CAAC;AACH"}